(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/file.19ff04d1.png"},function(e,t,a){e.exports=a.p+"static/media/folder.4506f81e.png"},,function(e,t,a){e.exports=a.p+"static/media/cd.ec7846ff.gif"},function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),c=a.n(l),i=(a(15),a(1)),s=a(2),o=(a(16),a(3)),m=a.n(o);function u(e){var t=[];for(var a in e)"pop"!==a&&"edm"!==a&&"rap"!==a&&t.push([a,e[a]]);return t.sort((function(e,t){return t[1]-e[1]})),t}function d(e,t){e.hasOwnProperty(t)?e[t]++:e[t]=1}function p(e,t){for(var a=0,n=0,r=[],l=e.length-1;a<t&&a<l;){if(e[n]){var c=e[n][0];"pop"!==c&&"edm"!==c&&"rap"!==c?(r.push(c),a++):l-=1}n++}return r}var f=function(e){var t=new m.a,a=e.allGenres,l=Object(n.useState)(-1),c=Object(s.a)(l,2),o=c[0],f=c[1],E=Object(n.useState)({loading:!0,error:!1,genres:[],genreObj:{}}),g=Object(s.a)(E,2),v=g[0],b=g[1];Object(n.useEffect)((function(){b(Object(i.a)(Object(i.a)({},v),{},{loading:!0})),O(0),h()}),[e.pl]);var h=function(){t.getPlaylistTracks(e.pl.id).then((function(t){var a=t.items.map((function(e){return null!==e.track?e.track.artists[0].id:null}));a=a.filter((function(e){return null!==e})),w({},a,0,a.length,e.pl.name)})).catch((function(e){b(Object(i.a)(Object(i.a)({},v),{},{error:!0}))}))},w=function a(n,r,l,c,s){l<c?t.getArtists(r.slice(l,l+50)).then((function(t){t.artists.forEach((function(t){t.genres.forEach((function(t){d(n,t),d(e.allGenres,t)}))})),e.setGenres(e.allGenres),a(n,r,l+50,c,s)})).catch((function(e){b(Object(i.a)(Object(i.a)({},v),{},{error:!0}))})):N(n)},N=function(t){var n=[],r={};n=Object.keys(t).length>0?p(r=u(t),3):["N/A"],b({loading:!1,genres:n,genreObj:r,error:!1}),e.setGenres(a)},O=function e(t){f(t+1),t<110&&setTimeout((function(){e(t+1)}),15)};return v.loading||o<110?r.a.createElement("div",null,r.a.createElement("p",null,"Loading... (",Math.min(o,100),"%)"),r.a.createElement("div",{className:"loading-bar"},r.a.createElement("div",{className:"loading-bar-inner"})),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("div",{className:"button",onClick:function(){return e.setFeatured(-1)}},"Cancel"))):r.a.createElement("div",{className:"playlist"},r.a.createElement("img",{src:function(){if(e.pl.images)return e.pl.images[0].url}()}),r.a.createElement("a",{href:e.pl.external_urls.spotify},r.a.createElement("h3",null,e.pl.name)),v.genres.map((function(e,t){return r.a.createElement("p",{className:"genres",key:t},e)})))},E=a(6),g=a.n(E),v=a(7),b=a.n(v);var h=function(e){return r.a.createElement("div",{className:"main-window",id:e.id},r.a.createElement("div",{className:"window-title-bar"},r.a.createElement("p",null,e.title),r.a.createElement("p",{className:"close",onClick:e.closeFunction},"X")),r.a.createElement("div",{className:"inner-window"},r.a.createElement("div",{className:"window-nav-bar"},r.a.createElement("ul",null,e.options.map((function(e,t){return r.a.createElement("li",{key:t},e)})))),e.addressBar?r.a.createElement("div",{className:"address-bar"},r.a.createElement("p",null,"Address:"),r.a.createElement("div",{className:"url"},"https://genre-analyzer.herokuapp.com/"),r.a.createElement("p",null,"Links")):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"content-window"},e.children),e.bottomBar?r.a.createElement("div",{className:"bottom-bar"},r.a.createElement("p",{id:e.bottomBarId,onClick:e.bottomBarClick},e.bottomBarContent)):r.a.createElement(r.a.Fragment,null)))};var w=function(e){var t=Object(n.useState)({playlists:[{}],genres:{}}),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!0),o=Object(s.a)(i,2),d=(o[0],o[1]),p=Object(n.useState)(-1),E=Object(s.a)(p,2),v=E[0],w=E[1],N=new m.a;return N.setAccessToken(e.token),Object(n.useEffect)((function(){N.getUserPlaylists(e.id,{limit:50}).then((function(e){console.log(e.items),c({playlists:e.items,genres:l.genres})}))}),[c]),Object(n.useEffect)((function(){d(!1)}),[l.playlists]),r.a.createElement("div",{className:"genres-wrapper"},r.a.createElement(h,{id:"playlists",title:"File Manager",closeFunction:e.logOut,options:["file","disk","tree","view","options"],bottomBar:!0,bottomBarContent:"Total "+l.playlists.length+" file(s)"},r.a.createElement("div",{className:"folder-wrapper"},r.a.createElement("img",{src:b.a}),r.a.createElement("p",{className:"playlist-name"},"my playlists")),r.a.createElement("div",{className:"folder-indent"},l.playlists.map((function(e,t){return r.a.createElement("div",{className:"folder-wrapper",key:t},r.a.createElement("div",{className:"folder-line"}),r.a.createElement("div",{className:"folder-placeholder "+(t===v?"selected":"")},r.a.createElement("img",{src:g.a}),r.a.createElement("p",{key:t,onClick:function(){return w(t)},className:"playlist-name"},e.name)))})))),r.a.createElement("div",{className:"popup-wrapper"},v>=0?r.a.createElement(h,{id:"featured",title:"Note Pad",options:e.notePadOptions,closeFunction:function(){return w(-1)},bottomBar:!1},r.a.createElement(f,{pl:l.playlists[v],allGenres:l.genres,setGenres:function(e){var t=u(e);c({playlists:l.playlists,genres:t})},setFeatured:w})):r.a.createElement("div",null)))},N=a(8),O=a(9),y=a.n(O);var k=function(){var e=Object(n.useState)({loggedIn:!1,token:"",id:""}),t=Object(s.a)(e,2),a=t[0],l=t[1],c=new m.a;return Object(n.useEffect)((function(){var e=function(){var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=a.exec(n);e;)t[e[1]]=decodeURIComponent(e[2]),e=a.exec(n);return t}(),t=e.access_token;t&&c.setAccessToken(t),l({loggedIn:!!t,token:t,id:e.id})}),[l]),r.a.createElement("div",{className:"App"},r.a.createElement(N.a,null,a.loggedIn?r.a.createElement("div",{className:"wrapper"},r.a.createElement(w,{token:a.token,id:a.id,logOut:function(){l(Object(i.a)(Object(i.a)({},a),{},{loggedIn:!1}))},notePadOptions:["file","edit","format","view","help"]})):r.a.createElement("div",{className:"wrapper"},r.a.createElement(h,{id:"login",title:"Internet Explorer",options:["file","edit","view","favorites","help"],addressBar:!0,bottomBar:!0},r.a.createElement("img",{src:y.a}),r.a.createElement("h1",null,"Playlist Genre Analyzer"),r.a.createElement("div",{className:"start-descrip"},r.a.createElement("p",null,"Made by ",r.a.createElement("a",{href:"https://linktr.ee/claireyw"},"Claire Wang")),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("div",{className:"button"},r.a.createElement("a",{href:"/login"}," Connect Spotify "))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.4fc12f64.chunk.js.map